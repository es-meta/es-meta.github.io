import{o as k,r as l,g as b,j as e,n as w,a9 as N,u as C,al as j,am as f,an as S,a5 as v,ao as B,ap as T,aq as M,ar as I,as as F}from"./index-yaGGO9Zf.js";import{f as O}from"./fuzzy.utils-CRPdpn4L.js";import{AlgoViewerHeaderUsingAlgoName as y}from"./AlgoViewerHeader-D68XwhcY.js";import{H as z,G as V,K as H,j as E}from"./combobox-Cp8hBLpc.js";import{B as R}from"./bp.types-5Bw1Nza2.js";import{S as $}from"./switch-4jCZQrUA.js";import{t as q}from"./ordinal.utils-BB0KuaeA.js";import{S as P}from"./StateViewerItem-q1628Jxm.js";import{T as G,a as K,b as Q}from"./tooltip-DFb1jHUV.js";import{v as U}from"./v4-Ch9TGLTe.js";import"./use-transient-a548Ayeb.js";import"./use-resolve-button-type-BjHBw60n.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=k("OctagonPause",[["path",{d:"M10 15V9",key:"1lckn7"}],["path",{d:"M14 15V9",key:"1muqhk"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=k("Octagon",[["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function L(a,t){return t[a]?.nameForCallstack??a}function _(a,t){return O(a,t.replace(" ",""),.2,n=>n.search)}function D({values:a,value:t,onChange:n,placeholder:o}){const[i,r]=l.useState(""),m=b(N),c=l.useMemo(()=>a.map(s=>({name:s,search:L(s,m),view:e.jsx(y,{name:s})})),[a,m]),d=l.useMemo(()=>_(c,i),[i,a]),p=l.useMemo(()=>c.find(s=>s.name===t),[t,c]);return e.jsxs(z,{immediate:!0,as:"div",className:"relative size-full",virtual:{options:d},value:p,onChange:s=>n(s?.name??null),children:[e.jsx(V,{placeholder:o,onChange:s=>r(s.target.value)}),e.jsx(H,{transition:!0,anchor:"bottom",className:"bg-white dark:bg-neutral-800 font-mono text-sm z-101 shadow-lg w-(--input-width) origin-top transition duration-200 ease-out empty:invisible data-closed:scale-95 data-closed:opacity-0 h-96 overflow-scroll rounded-lg",children:({option:s})=>e.jsx(E,{value:s,as:l.Fragment,children:({focus:h})=>e.jsx("div",{className:w("even:bg-white odd:bg-neutral-50","dark:even:bg-neutral-800 dark:odd:bg-neutral-900","p-2 cursor-pointer w-full break-all",h&&"even:bg-blue-200 odd:bg-blue-200 dark:even:bg-blue-950 dark:odd:bg-blue-950"),title:s.name,children:s.view})},s.name)})]})}function Y(a){const{idx:t,onToggleClick:n,onRemoveClick:o,data:i}=a,r=l.useMemo(()=>t%2===0,[t]),{viewName:m,enabled:c}=i,d=l.useCallback(()=>{n(t)},[n,t]),p=l.useCallback(()=>{o(t)},[o,t]);return e.jsx(e.Fragment,{children:e.jsxs("tr",{className:w(" hover:bg-neutral-500/25 transition-all",r?"bg-white dark:bg-neutral-900":"bg-neutral-100 dark:bg-neutral-800"),children:[e.jsx("td",{className:"lowercase border-r overflow-hidden text-wrap text-center",children:q(i.steps)}),e.jsx("td",{className:"border-r overflow-hidden break-before-all text-wrap pb-1",children:e.jsx(y,{name:m})}),e.jsx("td",{className:"border-r text-center",children:e.jsx($,{checked:c,onChange:()=>d()})}),e.jsx("td",{className:"",children:e.jsx("button",{className:"h-full size-full items-center flex justify-center hover:text-red-600 active:scale-90 transition-all",onClick:()=>p(),children:e.jsx(J,{})})})]})})}function Z(a,t,n,o,i){const r=t!==null?o[t]?.name:null,m=Object.values(o).map(h=>h.name);if(t===null||r===null)return r;const c=[1],d=`${c} @ ${r}`,p=n.some(({duplicateCheckId:h})=>h===d);return m.includes(r)&&!p?i({type:R.Spec,duplicateCheckId:d,algoName:o[t].info?.name??(console.error("require spec info"),""),viewName:r,steps:c,enabled:!0}):p?v.warning(`Breakpoint already set: ${d}`):v.warning(`Wrong algorithm name: ${r}`),r}function me(){const a=b(N),t=l.useMemo(()=>new Set(Object.values(a).map(u=>u.info?.name??"")).values().toArray().filter(u=>u!==""),[a]),n=b(B),[o,i]=C(T),r=b(M),m=r===j.INIT||r===j.JS_INPUT,[c,d]=l.useState(null),p=f(I),s=f(F),h=l.useCallback(u=>{const g=Object.values(a).find(x=>x.name===u)?.fid??null;d(Z(!0,g,n,a,s))},[n,a]),A=l.useCallback(()=>{i(u=>!u)},[i]);return e.jsxs(P,{header:"Breakpoints",headerItems:e.jsxs(G,{children:[e.jsx(K,{asChild:!0,children:e.jsx(S,{position:"single",disabled:m,onClick:A,className:o?"h-6 bg-blue-600 hover:bg-blue-500 dark:bg-blue-600 hover:dark:bg-blue-500 text-white hover:text-white":"h-6",icon:o?e.jsx(X,{}):e.jsx(W,{}),label:o?e.jsx("span",{children:"skipping breakpoints"}):e.jsx("span",{children:"using breakpoints"})})}),e.jsx(Q,{children:e.jsx("p",{children:"If this is toggled on, skip breakpoints when doing steps"})})]}),children:[e.jsx("div",{className:"flex flex-row items-center w-full text-xs",children:e.jsx(D,{value:c,values:t,onChange:h,placeholder:"search by name"})}),e.jsxs("table",{className:"w-full text-xs border-t",children:[e.jsx("thead",{className:"font-200 text-neutral-500 dark:text-neutral-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-r",children:"Step"}),e.jsx("th",{className:"border-r w-auto",children:"Name"}),e.jsx("th",{className:"border-r w-4",children:"Enable"}),e.jsx("th",{className:"w-1",children:"Remove"})]})}),e.jsx("tbody",{children:n.length>0?n.map((u,g)=>e.jsx(Y,{data:u,idx:g,onRemoveClick:x=>p(x),onToggleClick:()=>null},U())):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-neutral-500 dark:text-neutral-400 p-4 text-sm",children:"No breakpoints. Add Breakpoint by clicking on steps in spec viewer or by searching name"})})})]})]})}export{Z as addBreakHandler,me as default};
