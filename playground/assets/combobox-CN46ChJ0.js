import{r as c,ax as Z,ay as j,az as rt,z as O,aA as st,aB as at,aC as de,aD as ut,aE as Ue,aF as pe,aG as he,aH as ct,aI as dt,aJ as ft,aK as mt,aL as pt,aM as ht,aN as gt,x as Ke,T as B,aO as we,K as re,Q as vt,b as bt,s as xt,t as Et,aP as St,aQ as oe,aR as It,a as Ot,L as se,aS as Ct,aT as fe,D as yt,q as Rt,y as me,aU as Ye,aV as Me,I as Ie,U as Tt,$ as qe,A as Ge,_ as Oe,B as wt,aW as Mt,aX as Pt,aY as $t,aZ as Ft,a_ as Dt,a$ as At,b0 as zt,b1 as _t,b2 as Pe,F as W,b3 as $e,E as kt,b4 as Bt,b5 as Nt}from"./index-C6px-0LU.js";import{e as Ht}from"./use-resolve-button-type-BccZYqBG.js";function ne(e,i,t){let n=t.initialDeps??[],o;function r(){var s,l,a,d;let f;t.key&&((s=t.debug)!=null&&s.call(t))&&(f=Date.now());const g=e();if(!(g.length!==n.length||g.some((m,p)=>n[p]!==m)))return o;n=g;let u;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(u=Date.now()),o=i(...g),t.key&&((a=t.debug)!=null&&a.call(t))){const m=Math.round((Date.now()-f)*100)/100,p=Math.round((Date.now()-u)*100)/100,h=p/16,y=(R,b)=>{for(R=String(R);R.length<b;)R=" "+R;return R};console.info(`%c⏱ ${y(p,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,t?.key)}return(d=t?.onChange)==null||d.call(t,o),o}return r.updateDeps=s=>{n=s},r}function ge(e,i){if(e===void 0)throw new Error("Unexpected undefined");return e}const Lt=(e,i)=>Math.abs(e-i)<1,Vt=(e,i,t)=>{let n;return function(...o){e.clearTimeout(n),n=e.setTimeout(()=>i.apply(this,o),t)}},Wt=e=>e,jt=e=>{const i=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=i;o<=t;o++)n.push(o);return n},Ut=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const o=s=>{const{width:l,height:a}=s;i({width:Math.round(l),height:Math.round(a)})};if(o(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const r=new n.ResizeObserver(s=>{const l=()=>{const a=s[0];if(a?.borderBoxSize){const d=a.borderBoxSize[0];if(d){o({width:d.inlineSize,height:d.blockSize});return}}o(t.getBoundingClientRect())};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return r.observe(t,{box:"border-box"}),()=>{r.unobserve(t)}},Fe={passive:!0},De=typeof window>"u"?!0:"onscrollend"in window,Kt=(e,i)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let o=0;const r=e.options.useScrollendEvent&&De?()=>{}:Vt(n,()=>{i(o,!1)},e.options.isScrollingResetDelay),s=f=>()=>{const{horizontal:g,isRtl:v}=e.options;o=g?t.scrollLeft*(v&&-1||1):t.scrollTop,r(),i(o,f)},l=s(!0),a=s(!1);a(),t.addEventListener("scroll",l,Fe);const d=e.options.useScrollendEvent&&De;return d&&t.addEventListener("scrollend",a,Fe),()=>{t.removeEventListener("scroll",l),d&&t.removeEventListener("scrollend",a)}},Yt=(e,i,t)=>{if(i?.borderBoxSize){const n=i.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},qt=(e,{adjustments:i=0,behavior:t},n)=>{var o,r;const s=e+i;(r=(o=n.scrollElement)==null?void 0:o.scrollTo)==null||r.call(o,{[n.options.horizontal?"left":"top"]:s,behavior:t})};class Gt{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(o=>{o.forEach(r=>{const s=()=>{this._measureElement(r.target,r)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var o;(o=n())==null||o.disconnect(),t=null},observe:o=>{var r;return(r=n())==null?void 0:r.observe(o,{box:"border-box"})},unobserve:o=>{var r;return(r=n())==null?void 0:r.unobserve(o)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,o])=>{typeof o>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Wt,rangeExtractor:jt,onChange:()=>{},measureElement:Yt,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,o;(o=(n=this.options).onChange)==null||o.call(n,this,t)},this.maybeNotify=ne(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,r)=>{this.scrollAdjustments=0,this.scrollDirection=r?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=r,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const o=new Map,r=new Map;for(let s=n-1;s>=0;s--){const l=t[s];if(o.has(l.lane))continue;const a=r.get(l.lane);if(a==null||l.end>a.end?r.set(l.lane,l):l.end<a.end&&o.set(l.lane,!0),o.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((s,l)=>s.end===l.end?s.index-l.index:s.end-l.end)[0]:void 0},this.getMeasurementOptions=ne(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,o,r,s)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:o,getItemKey:r,enabled:s}),{key:!1}),this.getMeasurements=ne(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:o,getItemKey:r,enabled:s},l)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,a);for(let f=a;f<t;f++){const g=r(f),v=this.options.lanes===1?d[f-1]:this.getFurthestMeasurement(d,f),u=v?v.end+this.options.gap:n+o,m=l.get(g),p=typeof m=="number"?m:this.options.estimateSize(f),h=u+p,y=v?v.lane:f%this.options.lanes;d[f]={index:f,start:u,size:p,end:h,key:g,lane:y}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=ne(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,o,r)=>this.range=t.length>0&&n>0?Jt({measurements:t,outerSize:n,scrollOffset:o,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=ne(()=>{let t=null,n=null;const o=this.calculateRange();return o&&(t=o.startIndex,n=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,o,r,s)=>r===null||s===null?[]:t({startIndex:r,endIndex:s,overscan:n,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,o=t.getAttribute(n);return o?parseInt(o,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const o=this.indexFromElement(t),r=this.measurementsCache[o];if(!r)return;const s=r.key,l=this.elementsCache.get(s);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(s,t)),t.isConnected&&this.resizeItem(o,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const o=this.measurementsCache[t];if(!o)return;const r=this.itemSizeCache.get(o.key)??o.size,s=n-r;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,s,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,o)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(o))});return}this._measureElement(t,void 0)},this.getVirtualItems=ne(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const o=[];for(let r=0,s=t.length;r<s;r++){const l=t[r],a=n[l];o.push(a)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return ge(n[Je(0,n.length-1,o=>ge(n[o]).start,t)])},this.getOffsetForAlignment=(t,n,o=0)=>{const r=this.getSize(),s=this.getScrollOffset();n==="auto"&&(n=t>=s+r?"end":"start"),n==="center"?t+=(o-r)/2:n==="end"&&(t-=r);const l=this.options.horizontal?"scrollWidth":"scrollHeight",d=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-r;return Math.max(Math.min(d,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const o=this.measurementsCache[t];if(!o)return;const r=this.getSize(),s=this.getScrollOffset();if(n==="auto")if(o.end>=s+r-this.options.scrollPaddingEnd)n="end";else if(o.start<=s+this.options.scrollPaddingStart)n="start";else return[s,n];const l=n==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,n,o.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:o})},this.scrollToIndex=(t,{align:n="auto",behavior:o}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const r=this.getOffsetForIndex(t,n);if(!r)return;const[s,l]=r;this._scrollToOffset(s,{adjustments:void 0,behavior:o}),o!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[d]=ge(this.getOffsetForIndex(t,l));Lt(d,this.getScrollOffset())||this.scrollToIndex(t,{align:l,behavior:o})}else this.scrollToIndex(t,{align:l,behavior:o})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let o;if(n.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((t=n[n.length-1])==null?void 0:t.end)??0;else{const r=Array(this.options.lanes).fill(null);let s=n.length-1;for(;s>=0&&r.some(l=>l===null);){const l=n[s];r[l.lane]===null&&(r[l.lane]=l.end),s--}o=Math.max(...r.filter(l=>l!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:o})=>{this.options.scrollToFn(t,{behavior:o,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(i)}}const Je=(e,i,t,n)=>{for(;e<=i;){const o=(e+i)/2|0,r=t(o);if(r<n)e=o+1;else if(r>n)i=o-1;else return o}return e>0?e-1:0};function Jt({measurements:e,outerSize:i,scrollOffset:t,lanes:n}){const o=e.length-1,r=a=>e[a].start;if(e.length<=n)return{startIndex:0,endIndex:o};let s=Je(0,o,r,t),l=s;if(n===1)for(;l<o&&e[l].end<t+i;)l++;else if(n>1){const a=Array(n).fill(0);for(;l<o&&a.some(f=>f<t+i);){const f=e[l];a[f.lane]=f.end,l++}const d=Array(n).fill(t+i);for(;s>=0&&d.some(f=>f>=t);){const f=e[s];d[f.lane]=f.start,s--}s=Math.max(0,s-s%n),l=Math.min(o,l+(n-1-l%n))}return{startIndex:s,endIndex:l}}const Ae=typeof document<"u"?c.useLayoutEffect:c.useEffect;function Xt(e){const i=c.useReducer(()=>({}),{})[1],t={...e,onChange:(o,r)=>{var s;r?Z.flushSync(i):i(),(s=e.onChange)==null||s.call(e,o,r)}},[n]=c.useState(()=>new Gt(t));return n.setOptions(t),Ae(()=>n._didMount(),[]),Ae(()=>n._willUpdate()),n}function Qt(e){return Xt({observeElementRect:Ut,observeElementOffset:Kt,scrollToFn:qt,...e})}function Zt(e){if(e===null)return{width:0,height:0};let{width:i,height:t}=e.getBoundingClientRect();return{width:i,height:t}}function ze(e,i=!1){let[t,n]=c.useReducer(()=>({}),{}),o=c.useMemo(()=>Zt(e),[e,t]);return j(()=>{if(!e)return;let r=new ResizeObserver(n);return r.observe(e),()=>{r.disconnect()}},[e]),i?{width:`${o.width}px`,height:`${o.height}px`}:o}function Xe(e){let i=c.useRef({value:"",selectionStart:null,selectionEnd:null});return rt(e,"blur",t=>{let n=t.target;n instanceof HTMLInputElement&&(i.current={value:n.value,selectionStart:n.selectionStart,selectionEnd:n.selectionEnd})}),O(()=>{if(document.activeElement!==e&&e instanceof HTMLInputElement&&e.isConnected){if(e.focus({preventScroll:!0}),e.value!==i.current.value)e.setSelectionRange(e.value.length,e.value.length);else{let{selectionStart:t,selectionEnd:n}=i.current;t!==null&&n!==null&&e.setSelectionRange(t,n)}i.current={value:"",selectionStart:null,selectionEnd:null}}})}function _e(e){return[e.screenX,e.screenY]}function en(){let e=c.useRef([-1,-1]);return{wasMoved(i){let t=_e(i);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(i){e.current=_e(i)}}}function tn(e,{container:i,accept:t,walk:n}){let o=c.useRef(t),r=c.useRef(n);c.useEffect(()=>{o.current=t,r.current=n},[t,n]),j(()=>{if(!i||!e)return;let s=st(i);if(!s)return;let l=o.current,a=r.current,d=Object.assign(g=>l(g),{acceptNode:l}),f=s.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,d,!1);for(;f.nextNode();)a(f.currentNode)},[i,e,o,r])}function nn(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(i=>{let{brand:t,version:n}=i;return t+"/"+n}).join(" "):navigator.userAgent}const Qe={...ft},on=Qe.useInsertionEffect,ln=on||(e=>e());function Ze(e){const i=c.useRef(()=>{});return ln(()=>{i.current=e}),c.useCallback(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return i.current==null?void 0:i.current(...n)},[])}var Ee=typeof document<"u"?c.useLayoutEffect:c.useEffect;let ke=!1,rn=0;const Be=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+rn++;function sn(){const[e,i]=c.useState(()=>ke?Be():void 0);return Ee(()=>{e==null&&i(Be())},[]),c.useEffect(()=>{ke=!0},[]),e}const an=Qe.useId,un=an||sn;function cn(){const e=new Map;return{emit(i,t){var n;(n=e.get(i))==null||n.forEach(o=>o(t))},on(i,t){e.set(i,[...e.get(i)||[],t])},off(i,t){var n;e.set(i,((n=e.get(i))==null?void 0:n.filter(o=>o!==t))||[])}}}const dn=c.createContext(null),fn=c.createContext(null),mn=()=>{var e;return((e=c.useContext(dn))==null?void 0:e.id)||null},pn=()=>c.useContext(fn),hn="data-floating-ui-focusable";function gn(e){const{open:i=!1,onOpenChange:t,elements:n}=e,o=un(),r=c.useRef({}),[s]=c.useState(()=>cn()),l=mn()!=null,[a,d]=c.useState(n.reference),f=Ze((u,m,p)=>{r.current.openEvent=u?m:void 0,s.emit("openchange",{open:u,event:m,reason:p,nested:l}),t?.(u,m,p)}),g=c.useMemo(()=>({setPositionReference:d}),[]),v=c.useMemo(()=>({reference:a||n.reference||null,floating:n.floating||null,domReference:n.reference}),[a,n.reference,n.floating]);return c.useMemo(()=>({dataRef:r,open:i,onOpenChange:f,elements:v,events:s,floatingId:o,refs:g}),[i,f,v,s,o,g])}function vn(e){e===void 0&&(e={});const{nodeId:i}=e,t=gn({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||t,o=n.elements,[r,s]=c.useState(null),[l,a]=c.useState(null),f=o?.domReference||r,g=c.useRef(null),v=pn();Ee(()=>{f&&(g.current=f)},[f]);const u=at({...e,elements:{...o,...l&&{reference:l}}}),m=c.useCallback(b=>{const C=de(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;a(C),u.refs.setReference(C)},[u.refs]),p=c.useCallback(b=>{(de(b)||b===null)&&(g.current=b,s(b)),(de(u.refs.reference.current)||u.refs.reference.current===null||b!==null&&!de(b))&&u.refs.setReference(b)},[u.refs]),h=c.useMemo(()=>({...u.refs,setReference:p,setPositionReference:m,domReference:g}),[u.refs,p,m]),y=c.useMemo(()=>({...u.elements,domReference:f}),[u.elements,f]),R=c.useMemo(()=>({...u,...n,refs:h,elements:y,nodeId:i}),[u,h,y,i,n]);return Ee(()=>{n.dataRef.current.floatingContext=R;const b=v?.nodesRef.current.find(C=>C.id===i);b&&(b.context=R)}),c.useMemo(()=>({...u,context:R,refs:h,elements:y}),[u,h,y,R])}const Ne="active",He="selected";function ve(e,i,t){const n=new Map,o=t==="item";let r=e;if(o&&e){const{[Ne]:s,[He]:l,...a}=e;r=a}return{...t==="floating"&&{tabIndex:-1,[hn]:""},...r,...i.map(s=>{const l=s?s[t]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((s,l)=>(l&&Object.entries(l).forEach(a=>{let[d,f]=a;if(!(o&&[Ne,He].includes(d)))if(d.indexOf("on")===0){if(n.has(d)||n.set(d,[]),typeof f=="function"){var g;(g=n.get(d))==null||g.push(f),s[d]=function(){for(var v,u=arguments.length,m=new Array(u),p=0;p<u;p++)m[p]=arguments[p];return(v=n.get(d))==null?void 0:v.map(h=>h(...m)).find(h=>h!==void 0)}}}else s[d]=f}),s),{})}}function bn(e){e===void 0&&(e=[]);const i=e.map(l=>l?.reference),t=e.map(l=>l?.floating),n=e.map(l=>l?.item),o=c.useCallback(l=>ve(l,e,"reference"),i),r=c.useCallback(l=>ve(l,e,"floating"),t),s=c.useCallback(l=>ve(l,e,"item"),n);return c.useMemo(()=>({getReferenceProps:o,getFloatingProps:r,getItemProps:s}),[o,r,s])}function Le(e,i){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:i}}}}const xn=e=>({name:"inner",options:e,async fn(i){const{listRef:t,overflowRef:n,onFallbackChange:o,offset:r=0,index:s=0,minItemsVisible:l=4,referenceOverflowThreshold:a=0,scrollRef:d,...f}=ut(e,i),{rects:g,elements:{floating:v}}=i,u=t.current[s],m=d?.current||v,p=v.clientTop||m.clientTop,h=v.clientTop!==0,y=m.clientTop!==0,R=v===m;if(!u)return{};const b={...i,...await Ue(-u.offsetTop-v.clientTop-g.reference.height/2-u.offsetHeight/2-r).fn(i)},C=await pe(Le(b,m.scrollHeight+p+v.clientTop),f),w=await pe(b,{...f,elementContext:"reference"}),T=he(0,C.top),I=b.y+T,_=(m.scrollHeight>m.clientHeight?$=>$:dt)(he(0,m.scrollHeight+(h&&R||y?p*2:0)-T-he(0,C.bottom)));if(m.style.maxHeight=_+"px",m.scrollTop=T,o){const $=m.offsetHeight<u.offsetHeight*ct(l,t.current.length)-1||w.top>=-a||w.bottom>=-a;Z.flushSync(()=>o($))}return n&&(n.current=await pe(Le({...b,y:I},m.offsetHeight+p+v.clientTop),f)),{y:I}}});function En(e,i){const{open:t,elements:n}=e,{enabled:o=!0,overflowRef:r,scrollRef:s,onChange:l}=i,a=Ze(l),d=c.useRef(!1),f=c.useRef(null),g=c.useRef(null);c.useEffect(()=>{if(!o)return;function u(p){if(p.ctrlKey||!m||r.current==null)return;const h=p.deltaY,y=r.current.top>=-.5,R=r.current.bottom>=-.5,b=m.scrollHeight-m.clientHeight,C=h<0?-1:1,w=h<0?"max":"min";m.scrollHeight<=m.clientHeight||(!y&&h>0||!R&&h<0?(p.preventDefault(),Z.flushSync(()=>{a(T=>T+Math[w](h,b*C))})):/firefox/i.test(nn())&&(m.scrollTop+=h))}const m=s?.current||n.floating;if(t&&m)return m.addEventListener("wheel",u),requestAnimationFrame(()=>{f.current=m.scrollTop,r.current!=null&&(g.current={...r.current})}),()=>{f.current=null,g.current=null,m.removeEventListener("wheel",u)}},[o,t,n.floating,r,s,a]);const v=c.useMemo(()=>({onKeyDown(){d.current=!0},onWheel(){d.current=!1},onPointerMove(){d.current=!1},onScroll(){const u=s?.current||n.floating;if(!(!r.current||!u||!d.current)){if(f.current!==null){const m=u.scrollTop-f.current;(r.current.bottom<-.5&&m<-1||r.current.top<-.5&&m>1)&&Z.flushSync(()=>a(p=>p+m))}requestAnimationFrame(()=>{f.current=u.scrollTop})}}}),[n.floating,a,r,s]);return c.useMemo(()=>o?{floating:v}:{},[o,v])}let ae=c.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ae.displayName="FloatingContext";let Ce=c.createContext(null);Ce.displayName="PlacementContext";function Sn(e){return c.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function In(){return c.useContext(ae).setReference}function On(){let{getFloatingProps:e,slot:i}=c.useContext(ae);return c.useCallback((...t)=>Object.assign({},e(...t),{"data-anchor":i.anchor}),[e,i])}function Cn(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let i=c.useContext(Ce),t=c.useMemo(()=>e,[JSON.stringify(e,(o,r)=>{var s;return(s=r?.outerHTML)!=null?s:r})]);j(()=>{i?.(t??null)},[i,t]);let n=c.useContext(ae);return c.useMemo(()=>[n.setFloating,e?n.styles:{}],[n.setFloating,e,n.styles])}let Ve=4;function yn({children:e,enabled:i=!0}){let[t,n]=c.useState(null),[o,r]=c.useState(0),s=c.useRef(null),[l,a]=c.useState(null);Rn(l);let d=i&&t!==null&&l!==null,{to:f="bottom",gap:g=0,offset:v=0,padding:u=0,inner:m}=Tn(t,l),[p,h="center"]=f.split(" ");j(()=>{d&&r(0)},[d]);let{refs:y,floatingStyles:R,context:b}=vn({open:d,placement:p==="selection"?h==="center"?"bottom":`bottom-${h}`:h==="center"?`${p}`:`${p}-${h}`,strategy:"absolute",transform:!1,middleware:[Ue({mainAxis:p==="selection"?0:g,crossAxis:v}),mt({padding:u}),p!=="selection"&&pt({padding:u}),p==="selection"&&m?xn({...m,padding:u,overflowRef:s,offset:o,minItemsVisible:Ve,referenceOverflowThreshold:u,onFallbackChange($){var U,H;if(!$)return;let E=b.elements.floating;if(!E)return;let M=parseFloat(getComputedStyle(E).scrollPaddingBottom)||0,L=Math.min(Ve,E.childElementCount),q=0,X=0;for(let V of(H=(U=b.elements.floating)==null?void 0:U.childNodes)!=null?H:[])if(V instanceof HTMLElement){let Y=V.offsetTop,ee=Y+V.clientHeight+M,A=E.scrollTop,x=A+E.clientHeight;if(Y>=A&&ee<=x)L--;else{X=Math.max(0,Math.min(ee,x)-Math.max(Y,A)),q=V.clientHeight;break}}L>=1&&r(V=>{let Y=q*L-X+M;return V>=Y?V:Y})}}):null,ht({padding:u,apply({availableWidth:$,availableHeight:U,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${$}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${U}px)`})}})].filter(Boolean),whileElementsMounted:gt}),[C=p,w=h]=b.placement.split("-");p==="selection"&&(C="selection");let T=c.useMemo(()=>({anchor:[C,w].filter(Boolean).join(" ")}),[C,w]),I=En(b,{overflowRef:s,onChange:r}),{getReferenceProps:D,getFloatingProps:K}=bn([I]),_=O($=>{a($),y.setFloating($)});return c.createElement(Ce.Provider,{value:n},c.createElement(ae.Provider,{value:{setFloating:_,setReference:y.setReference,styles:R,getReferenceProps:D,getFloatingProps:K,slot:T}},e))}function Rn(e){j(()=>{if(!e)return;let i=new MutationObserver(()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let o=parseInt(t);isNaN(o)||n!==o&&(e.style.maxHeight=`${Math.ceil(n)}px`)});return i.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{i.disconnect()}},[e])}function Tn(e,i){var t,n,o;let r=be((t=e?.gap)!=null?t:"var(--anchor-gap, 0)",i),s=be((n=e?.offset)!=null?n:"var(--anchor-offset, 0)",i),l=be((o=e?.padding)!=null?o:"var(--anchor-padding, 0)",i);return{...e,gap:r,offset:s,padding:l}}function be(e,i,t=void 0){let n=Ke(),o=O((a,d)=>{if(a==null)return[t,null];if(typeof a=="number")return[a,null];if(typeof a=="string"){if(!d)return[t,null];let f=We(a,d);return[f,g=>{let v=et(a);{let u=v.map(m=>window.getComputedStyle(d).getPropertyValue(m));n.requestAnimationFrame(function m(){n.nextFrame(m);let p=!1;for(let[y,R]of v.entries()){let b=window.getComputedStyle(d).getPropertyValue(R);if(u[y]!==b){u[y]=b,p=!0;break}}if(!p)return;let h=We(a,d);f!==h&&(g(h),f=h)})}return n.dispose}]}return[t,null]}),r=c.useMemo(()=>o(e,i)[0],[e,i]),[s=r,l]=c.useState();return j(()=>{let[a,d]=o(e,i);if(l(a),!!d)return d(l)},[e,i]),s}function et(e){let i=/var\((.*)\)/.exec(e);if(i){let t=i[1].indexOf(",");if(t===-1)return[i[1]];let n=i[1].slice(0,t).trim(),o=i[1].slice(t+1).trim();return o?[n,...et(o)]:[n]}return[]}function We(e,i){let t=document.createElement("div");i.appendChild(t),t.style.setProperty("margin-top","0px","important"),t.style.setProperty("margin-top",e,"important");let n=parseFloat(window.getComputedStyle(t).marginTop)||0;return i.removeChild(t),n}function wn({children:e,freeze:i}){let t=Se(i,e);return B.createElement(B.Fragment,null,t)}function Se(e,i){let[t,n]=c.useState(i);return!e&&t!==i&&n(i),e?t:i}function Mn(e){throw new Error("Unexpected object: "+e)}var F=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(F||{});function je(e,i){let t=i.resolveItems();if(t.length<=0)return null;let n=i.resolveActiveIndex(),o=n??-1;switch(e.focus){case 0:{for(let r=0;r<t.length;++r)if(!i.resolveDisabled(t[r],r,t))return r;return n}case 1:{o===-1&&(o=t.length);for(let r=o-1;r>=0;--r)if(!i.resolveDisabled(t[r],r,t))return r;return n}case 2:{for(let r=o+1;r<t.length;++r)if(!i.resolveDisabled(t[r],r,t))return r;return n}case 3:{for(let r=t.length-1;r>=0;--r)if(!i.resolveDisabled(t[r],r,t))return r;return n}case 4:{for(let r=0;r<t.length;++r)if(i.resolveId(t[r],r,t)===e.id)return r;return n}case 5:return null;default:Mn(e)}}var ye=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(ye||{}),Pn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Pn||{}),$n=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))($n||{}),Fn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Fn||{}),Dn=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.SetTyping=3]="SetTyping",e[e.RegisterOption=4]="RegisterOption",e[e.UnregisterOption=5]="UnregisterOption",e[e.SetActivationTrigger=6]="SetActivationTrigger",e[e.UpdateVirtualConfiguration=7]="UpdateVirtualConfiguration",e[e.SetInputElement=8]="SetInputElement",e[e.SetButtonElement=9]="SetButtonElement",e[e.SetOptionsElement=10]="SetOptionsElement",e))(Dn||{});function xe(e,i=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,n=i(e.options.slice()),o=n.length>0&&n[0].dataRef.current.order!==null?n.sort((s,l)=>s.dataRef.current.order-l.dataRef.current.order):Nt(n,s=>s.dataRef.current.domRef.current),r=t?o.indexOf(t):null;return r===-1&&(r=null),{options:o,activeOptionIndex:r}}let An={1(e){var i;return(i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,__demoMode:!1}},0(e){var i,t;if((i=e.dataRef.current)!=null&&i.disabled||e.comboboxState===0)return e;if((t=e.dataRef.current)!=null&&t.value){let n=e.dataRef.current.calculateIndex(e.dataRef.current.value);if(n!==-1)return{...e,activeOptionIndex:n,comboboxState:0,__demoMode:!1}}return{...e,comboboxState:0,__demoMode:!1}},3(e,i){return e.isTyping===i.isTyping?e:{...e,isTyping:i.isTyping}},2(e,i){var t,n,o,r;if((t=e.dataRef.current)!=null&&t.disabled||e.optionsElement&&!((n=e.dataRef.current)!=null&&n.optionsPropsRef.current.static)&&e.comboboxState===1)return e;if(e.virtual){let{options:d,disabled:f}=e.virtual,g=i.focus===F.Specific?i.idx:je(i,{resolveItems:()=>d,resolveActiveIndex:()=>{var u,m;return(m=(u=e.activeOptionIndex)!=null?u:d.findIndex(p=>!f(p)))!=null?m:null},resolveDisabled:f,resolveId(){throw new Error("Function not implemented.")}}),v=(o=i.trigger)!=null?o:2;return e.activeOptionIndex===g&&e.activationTrigger===v?e:{...e,activeOptionIndex:g,activationTrigger:v,isTyping:!1,__demoMode:!1}}let s=xe(e);if(s.activeOptionIndex===null){let d=s.options.findIndex(f=>!f.dataRef.current.disabled);d!==-1&&(s.activeOptionIndex=d)}let l=i.focus===F.Specific?i.idx:je(i,{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled}),a=(r=i.trigger)!=null?r:2;return e.activeOptionIndex===l&&e.activationTrigger===a?e:{...e,...s,isTyping:!1,activeOptionIndex:l,activationTrigger:a,__demoMode:!1}},4:(e,i)=>{var t,n,o;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:[...e.options,i.payload]};let r=i.payload,s=xe(e,a=>(a.push(r),a));e.activeOptionIndex===null&&(n=e.dataRef.current)!=null&&n.isSelected(i.payload.dataRef.current.value)&&(s.activeOptionIndex=s.options.indexOf(r));let l={...e,...s,activationTrigger:2};return(o=e.dataRef.current)!=null&&o.__demoMode&&e.dataRef.current.value===void 0&&(l.activeOptionIndex=0),l},5:(e,i)=>{var t;if((t=e.dataRef.current)!=null&&t.virtual)return{...e,options:e.options.filter(o=>o.id!==i.id)};let n=xe(e,o=>{let r=o.findIndex(s=>s.id===i.id);return r!==-1&&o.splice(r,1),o});return{...e,...n,activationTrigger:2}},6:(e,i)=>e.activationTrigger===i.trigger?e:{...e,activationTrigger:i.trigger},7:(e,i)=>{var t,n;if(e.virtual===null)return{...e,virtual:{options:i.options,disabled:(t=i.disabled)!=null?t:()=>!1}};if(e.virtual.options===i.options&&e.virtual.disabled===i.disabled)return e;let o=e.activeOptionIndex;if(e.activeOptionIndex!==null){let r=i.options.indexOf(e.virtual.options[e.activeOptionIndex]);r!==-1?o=r:o=null}return{...e,activeOptionIndex:o,virtual:{options:i.options,disabled:(n=i.disabled)!=null?n:()=>!1}}},8:(e,i)=>e.inputElement===i.element?e:{...e,inputElement:i.element},9:(e,i)=>e.buttonElement===i.element?e:{...e,buttonElement:i.element},10:(e,i)=>e.optionsElement===i.element?e:{...e,optionsElement:i.element}},Re=c.createContext(null);Re.displayName="ComboboxActionsContext";function ue(e){let i=c.useContext(Re);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ue),t}return i}let tt=c.createContext(null);function zn(e){let i=ie("VirtualProvider"),{options:t}=i.virtual,[n,o]=c.useMemo(()=>{let d=i.optionsElement;if(!d)return[0,0];let f=window.getComputedStyle(d);return[parseFloat(f.paddingBlockStart||f.paddingTop),parseFloat(f.paddingBlockEnd||f.paddingBottom)]},[i.optionsElement]),r=Qt({enabled:t.length!==0,scrollPaddingStart:n,scrollPaddingEnd:o,count:t.length,estimateSize(){return 40},getScrollElement(){return i.optionsElement},overscan:12}),[s,l]=c.useState(0);j(()=>{l(d=>d+1)},[t]);let a=r.getVirtualItems();return a.length===0?null:B.createElement(tt.Provider,{value:r},B.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:d=>{d&&i.activationTrigger!==0&&i.activeOptionIndex!==null&&t.length>i.activeOptionIndex&&r.scrollToIndex(i.activeOptionIndex)}},a.map(d=>{var f;return B.createElement(c.Fragment,{key:d.key},B.cloneElement((f=e.children)==null?void 0:f.call(e,{...e.slot,option:t[d.index]}),{key:`${s}-${d.key}`,"data-index":d.index,"aria-setsize":t.length,"aria-posinset":d.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${d.start}px)`,overflowAnchor:"none"}}))})))}let le=c.createContext(null);le.displayName="ComboboxDataContext";function ie(e){let i=c.useContext(le);if(i===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ie),t}return i}function _n(e,i){return oe(i.type,An,e,i)}let kn=c.Fragment;function Bn(e,i){var t,n;let o=bt(),{value:r,defaultValue:s,onChange:l,form:a,name:d,by:f,disabled:g=o||!1,onClose:v,__demoMode:u=!1,multiple:m=!1,immediate:p=!1,virtual:h=null,nullable:y,...R}=e,b=xt(s),[C=m?[]:void 0,w]=Et(r,l,b),[T,I]=c.useReducer(_n,{dataRef:c.createRef(),comboboxState:u?0:1,isTyping:!1,options:[],virtual:h?{options:h.options,disabled:(t=h.disabled)!=null?t:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:u}),D=c.useRef(!1),K=c.useRef({static:!1,hold:!1}),_=St(f),$=O(S=>h?f===null?h.options.indexOf(S):h.options.findIndex(P=>_(P,S)):T.options.findIndex(P=>_(P.dataRef.current.value,S))),U=c.useCallback(S=>oe(E.mode,{1:()=>C.some(P=>_(P,S)),0:()=>_(C,S)}),[C]),H=O(S=>T.activeOptionIndex===$(S)),E=c.useMemo(()=>({...T,immediate:p,optionsPropsRef:K,value:C,defaultValue:b,disabled:g,mode:m?1:0,virtual:h?T.virtual:null,get activeOptionIndex(){if(D.current&&T.activeOptionIndex===null&&(h?h.options.length>0:T.options.length>0)){if(h){let P=h.options.findIndex(Q=>{var ce,Te;return!((Te=(ce=h.disabled)==null?void 0:ce.call(h,Q))!=null&&Te)});if(P!==-1)return P}let S=T.options.findIndex(P=>!P.dataRef.current.disabled);if(S!==-1)return S}return T.activeOptionIndex},calculateIndex:$,compare:_,isSelected:U,isActive:H}),[C,b,g,m,u,T,h]);j(()=>{var S;h&&I({type:7,options:h.options,disabled:(S=h.disabled)!=null?S:null})},[h,h?.options,h?.disabled]),j(()=>{T.dataRef.current=E},[E]);let M=E.comboboxState===0;It(M,[E.buttonElement,E.inputElement,E.optionsElement],()=>N.closeCombobox());let L=c.useMemo(()=>{var S,P,Q;return{open:E.comboboxState===0,disabled:g,activeIndex:E.activeOptionIndex,activeOption:E.activeOptionIndex===null?null:E.virtual?E.virtual.options[(S=E.activeOptionIndex)!=null?S:0]:(Q=(P=E.options[E.activeOptionIndex])==null?void 0:P.dataRef.current.value)!=null?Q:null,value:C}},[E,g,C]),q=O(()=>{if(E.activeOptionIndex!==null){if(N.setIsTyping(!1),E.virtual)x(E.virtual.options[E.activeOptionIndex]);else{let{dataRef:S}=E.options[E.activeOptionIndex];x(S.current.value)}N.goToOption(F.Specific,E.activeOptionIndex)}}),X=O(()=>{I({type:0}),D.current=!0}),V=O(()=>{I({type:1}),D.current=!1,v?.()}),Y=O(S=>{I({type:3,isTyping:S})}),ee=O((S,P,Q)=>(D.current=!1,S===F.Specific?I({type:2,focus:F.Specific,idx:P,trigger:Q}):I({type:2,focus:S,trigger:Q}))),A=O((S,P)=>(I({type:4,payload:{id:S,dataRef:P}}),()=>{E.isActive(P.current.value)&&(D.current=!0),I({type:5,id:S})})),x=O(S=>oe(E.mode,{0(){return w?.(S)},1(){let P=E.value.slice(),Q=P.findIndex(ce=>_(ce,S));return Q===-1?P.push(S):P.splice(Q,1),w?.(P)}})),G=O(S=>{I({type:6,trigger:S})}),k=O(S=>{I({type:8,element:S})}),J=O(S=>{I({type:9,element:S})}),z=O(S=>{I({type:10,element:S})}),N=c.useMemo(()=>({onChange:x,registerOption:A,goToOption:ee,setIsTyping:Y,closeCombobox:V,openCombobox:X,setActivationTrigger:G,selectActiveOption:q,setInputElement:k,setButtonElement:J,setOptionsElement:z}),[]),[te,nt]=Ot(),ot=i===null?{}:{ref:i},it=c.useCallback(()=>{if(b!==void 0)return w?.(b)},[w,b]),lt=se();return B.createElement(nt,{value:te,props:{htmlFor:(n=E.inputElement)==null?void 0:n.id},slot:{open:E.comboboxState===0,disabled:g}},B.createElement(yn,null,B.createElement(Re.Provider,{value:N},B.createElement(le.Provider,{value:E},B.createElement(Ct,{value:oe(E.comboboxState,{0:fe.Open,1:fe.Closed})},d!=null&&B.createElement(yt,{disabled:g,data:C!=null?{[d]:C}:{},form:a,onReset:it}),lt({ourProps:ot,theirProps:R,slot:L,defaultTag:kn,name:"Combobox"}))))))}let Nn="input";function Hn(e,i){var t,n,o,r,s;let l=ie("Combobox.Input"),a=ue("Combobox.Input"),d=c.useId(),f=Rt(),{id:g=f||`headlessui-combobox-input-${d}`,onChange:v,displayValue:u,disabled:m=l.disabled||!1,autoFocus:p=!1,type:h="text",...y}=e,R=c.useRef(null),b=me(R,i,In(),a.setInputElement),C=Ye(l.inputElement),w=Ke(),T=O(()=>{a.onChange(null),l.optionsElement&&(l.optionsElement.scrollTop=0),a.goToOption(F.Nothing)}),I=c.useMemo(()=>{var x;return typeof u=="function"&&l.value!==void 0?(x=u(l.value))!=null?x:"":typeof l.value=="string"?l.value:""},[l.value,u]);Me(([x,G],[k,J])=>{if(l.isTyping)return;let z=R.current;z&&((J===0&&G===1||x!==k)&&(z.value=x),requestAnimationFrame(()=>{if(l.isTyping||!z||C?.activeElement!==z)return;let{selectionStart:N,selectionEnd:te}=z;Math.abs((te??0)-(N??0))===0&&N===0&&z.setSelectionRange(z.value.length,z.value.length)}))},[I,l.comboboxState,C,l.isTyping]),Me(([x],[G])=>{if(x===0&&G===1){if(l.isTyping)return;let k=R.current;if(!k)return;let J=k.value,{selectionStart:z,selectionEnd:N,selectionDirection:te}=k;k.value="",k.value=J,te!==null?k.setSelectionRange(z,N,te):k.setSelectionRange(z,N)}},[l.comboboxState]);let D=c.useRef(!1),K=O(()=>{D.current=!0}),_=O(()=>{w.nextFrame(()=>{D.current=!1})}),$=O(x=>{switch(a.setIsTyping(!0),x.key){case W.Enter:if(l.comboboxState!==0||D.current)return;if(x.preventDefault(),x.stopPropagation(),l.activeOptionIndex===null){a.closeCombobox();return}a.selectActiveOption(),l.mode===0&&a.closeCombobox();break;case W.ArrowDown:return x.preventDefault(),x.stopPropagation(),oe(l.comboboxState,{0:()=>a.goToOption(F.Next),1:()=>a.openCombobox()});case W.ArrowUp:return x.preventDefault(),x.stopPropagation(),oe(l.comboboxState,{0:()=>a.goToOption(F.Previous),1:()=>{Z.flushSync(()=>a.openCombobox()),l.value||a.goToOption(F.Last)}});case W.Home:if(x.shiftKey)break;return x.preventDefault(),x.stopPropagation(),a.goToOption(F.First);case W.PageUp:return x.preventDefault(),x.stopPropagation(),a.goToOption(F.First);case W.End:if(x.shiftKey)break;return x.preventDefault(),x.stopPropagation(),a.goToOption(F.Last);case W.PageDown:return x.preventDefault(),x.stopPropagation(),a.goToOption(F.Last);case W.Escape:return l.comboboxState!==0?void 0:(x.preventDefault(),l.optionsElement&&!l.optionsPropsRef.current.static&&x.stopPropagation(),l.mode===0&&l.value===null&&T(),a.closeCombobox());case W.Tab:if(l.comboboxState!==0)return;l.mode===0&&l.activationTrigger!==1&&a.selectActiveOption(),a.closeCombobox();break}}),U=O(x=>{v?.(x),l.mode===0&&x.target.value===""&&T(),a.openCombobox()}),H=O(x=>{var G,k,J;let z=(G=x.relatedTarget)!=null?G:$e.find(N=>N!==x.currentTarget);if(!((k=l.optionsElement)!=null&&k.contains(z))&&!((J=l.buttonElement)!=null&&J.contains(z))&&l.comboboxState===0)return x.preventDefault(),l.mode===0&&l.value===null&&T(),a.closeCombobox()}),E=O(x=>{var G,k,J;let z=(G=x.relatedTarget)!=null?G:$e.find(N=>N!==x.currentTarget);(k=l.buttonElement)!=null&&k.contains(z)||(J=l.optionsElement)!=null&&J.contains(z)||l.disabled||l.immediate&&l.comboboxState!==0&&w.microTask(()=>{Z.flushSync(()=>a.openCombobox()),a.setActivationTrigger(1)})}),M=Ie(),L=Tt(),{isFocused:q,focusProps:X}=qe({autoFocus:p}),{isHovered:V,hoverProps:Y}=Ge({isDisabled:m}),ee=c.useMemo(()=>({open:l.comboboxState===0,disabled:m,hover:V,focus:q,autofocus:p}),[l,V,q,p,m]),A=Oe({ref:b,id:g,role:"combobox",type:h,"aria-controls":(t=l.optionsElement)==null?void 0:t.id,"aria-expanded":l.comboboxState===0,"aria-activedescendant":l.activeOptionIndex===null?void 0:l.virtual?(n=l.options.find(x=>!x.dataRef.current.disabled&&l.compare(x.dataRef.current.value,l.virtual.options[l.activeOptionIndex])))==null?void 0:n.id:(o=l.options[l.activeOptionIndex])==null?void 0:o.id,"aria-labelledby":M,"aria-describedby":L,"aria-autocomplete":"list",defaultValue:(s=(r=e.defaultValue)!=null?r:l.defaultValue!==void 0?u?.(l.defaultValue):null)!=null?s:l.defaultValue,disabled:m||void 0,autoFocus:p,onCompositionStart:K,onCompositionEnd:_,onKeyDown:$,onChange:U,onFocus:E,onBlur:H},X,Y);return se()({ourProps:A,theirProps:y,slot:ee,defaultTag:Nn,name:"Combobox.Input"})}let Ln="button";function Vn(e,i){var t;let n=ie("Combobox.Button"),o=ue("Combobox.Button"),r=me(i,o.setButtonElement),s=c.useId(),{id:l=`headlessui-combobox-button-${s}`,disabled:a=n.disabled||!1,autoFocus:d=!1,...f}=e,g=Xe(n.inputElement),v=O(I=>{switch(I.key){case W.Space:case W.Enter:I.preventDefault(),I.stopPropagation(),n.comboboxState===1&&Z.flushSync(()=>o.openCombobox()),g();return;case W.ArrowDown:I.preventDefault(),I.stopPropagation(),n.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),n.value||o.goToOption(F.First)),g();return;case W.ArrowUp:I.preventDefault(),I.stopPropagation(),n.comboboxState===1&&(Z.flushSync(()=>o.openCombobox()),n.value||o.goToOption(F.Last)),g();return;case W.Escape:if(n.comboboxState!==0)return;I.preventDefault(),n.optionsElement&&!n.optionsPropsRef.current.static&&I.stopPropagation(),Z.flushSync(()=>o.closeCombobox()),g();return;default:return}}),u=O(I=>{I.preventDefault(),!kt(I.currentTarget)&&(I.button===ye.Left&&(n.comboboxState===0?o.closeCombobox():o.openCombobox()),g())}),m=Ie([l]),{isFocusVisible:p,focusProps:h}=qe({autoFocus:d}),{isHovered:y,hoverProps:R}=Ge({isDisabled:a}),{pressed:b,pressProps:C}=wt({disabled:a}),w=c.useMemo(()=>({open:n.comboboxState===0,active:b||n.comboboxState===0,disabled:a,value:n.value,hover:y,focus:p}),[n,y,p,b,a]),T=Oe({ref:r,id:l,type:Ht(e,n.buttonElement),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(t=n.optionsElement)==null?void 0:t.id,"aria-expanded":n.comboboxState===0,"aria-labelledby":m,disabled:a||void 0,autoFocus:d,onMouseDown:u,onKeyDown:v},h,R,C);return se()({ourProps:T,theirProps:f,slot:w,defaultTag:Ln,name:"Combobox.Button"})}let Wn="div",jn=we.RenderStrategy|we.Static;function Un(e,i){var t,n,o;let r=c.useId(),{id:s=`headlessui-combobox-options-${r}`,hold:l=!1,anchor:a,portal:d=!1,modal:f=!0,transition:g=!1,...v}=e,u=ie("Combobox.Options"),m=ue("Combobox.Options"),p=Sn(a);p&&(d=!0);let[h,y]=Cn(p),[R,b]=c.useState(null),C=On(),w=me(i,p?h:null,m.setOptionsElement,b),T=Ye(u.optionsElement),I=Mt(),[D,K]=Pt(g,R,I!==null?(I&fe.Open)===fe.Open:u.comboboxState===0);$t(D,u.inputElement,m.closeCombobox);let _=u.__demoMode?!1:f&&u.comboboxState===0;Ft(_,T);let $=u.__demoMode?!1:f&&u.comboboxState===0;Dt($,{allowed:c.useCallback(()=>[u.inputElement,u.buttonElement,u.optionsElement],[u.inputElement,u.buttonElement,u.optionsElement])}),j(()=>{var A;u.optionsPropsRef.current.static=(A=e.static)!=null?A:!1},[u.optionsPropsRef,e.static]),j(()=>{u.optionsPropsRef.current.hold=l},[u.optionsPropsRef,l]),tn(u.comboboxState===0,{container:u.optionsElement,accept(A){return A.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:A.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(A){A.setAttribute("role","none")}});let U=Ie([(t=u.buttonElement)==null?void 0:t.id]),H=c.useMemo(()=>({open:u.comboboxState===0,option:void 0}),[u.comboboxState]),E=O(()=>{m.setActivationTrigger(0)}),M=O(A=>{A.preventDefault(),m.setActivationTrigger(0)}),L=Oe(p?C():{},{"aria-labelledby":U,role:"listbox","aria-multiselectable":u.mode===1?!0:void 0,id:s,ref:w,style:{...v.style,...y,"--input-width":ze(u.inputElement,!0).width,"--button-width":ze(u.buttonElement,!0).width},onWheel:u.activationTrigger===0?void 0:E,onMouseDown:M,...At(K)}),q=D&&u.comboboxState===1,X=Se(q,(n=u.virtual)==null?void 0:n.options),V=Se(q,u.value),Y=O(A=>u.compare(V,A));if(u.virtual){if(X===void 0)throw new Error("Missing `options` in virtual mode");Object.assign(v,{children:B.createElement(le.Provider,{value:X!==u.virtual.options?{...u,virtual:{...u.virtual,options:X}}:u},B.createElement(zn,{slot:H},v.children))})}let ee=se();return B.createElement(zt,{enabled:d?e.static||D:!1},B.createElement(le.Provider,{value:u.mode===1?u:{...u,isSelected:Y}},ee({ourProps:L,theirProps:{...v,children:B.createElement(wn,{freeze:q},typeof v.children=="function"?(o=v.children)==null?void 0:o.call(v,H):v.children)},slot:H,defaultTag:Wn,features:jn,visible:D,name:"Combobox.Options"})))}let Kn="div";function Yn(e,i){var t,n,o,r;let s=ie("Combobox.Option"),l=ue("Combobox.Option"),a=c.useId(),{id:d=`headlessui-combobox-option-${a}`,value:f,disabled:g=(o=(n=(t=s.virtual)==null?void 0:t.disabled)==null?void 0:n.call(t,f))!=null?o:!1,order:v=null,...u}=e,m=Xe(s.inputElement),p=s.virtual?s.activeOptionIndex===s.calculateIndex(f):s.activeOptionIndex===null?!1:((r=s.options[s.activeOptionIndex])==null?void 0:r.id)===d,h=s.isSelected(f),y=c.useRef(null),R=_t({disabled:g,value:f,domRef:y,order:v}),b=c.useContext(tt),C=me(i,y,b?b.measureElement:null),w=O(()=>{l.setIsTyping(!1),l.onChange(f)});j(()=>l.registerOption(d,R),[R,d]);let T=c.useRef(!(s.virtual||s.__demoMode));j(()=>{if(!s.virtual&&!s.__demoMode)return Pe().requestAnimationFrame(()=>{T.current=!0})},[s.virtual,s.__demoMode]),j(()=>{if(T.current&&s.comboboxState===0&&p&&s.activationTrigger!==0)return Pe().requestAnimationFrame(()=>{var M,L;(L=(M=y.current)==null?void 0:M.scrollIntoView)==null||L.call(M,{block:"nearest"})})},[y,p,s.comboboxState,s.activationTrigger,s.activeOptionIndex]);let I=O(M=>{M.preventDefault(),M.button===ye.Left&&(g||(w(),Bt()||requestAnimationFrame(()=>m()),s.mode===0&&l.closeCombobox()))}),D=O(()=>{if(g)return l.goToOption(F.Nothing);let M=s.calculateIndex(f);l.goToOption(F.Specific,M)}),K=en(),_=O(M=>K.update(M)),$=O(M=>{if(!K.wasMoved(M)||g||p)return;let L=s.calculateIndex(f);l.goToOption(F.Specific,L,0)}),U=O(M=>{K.wasMoved(M)&&(g||p&&(s.optionsPropsRef.current.hold||l.goToOption(F.Nothing)))}),H=c.useMemo(()=>({active:p,focus:p,selected:h,disabled:g}),[p,h,g]),E={id:d,ref:C,role:"option",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,"aria-selected":h,disabled:void 0,onMouseDown:I,onFocus:D,onPointerEnter:_,onMouseEnter:_,onPointerMove:$,onMouseMove:$,onPointerLeave:U,onMouseLeave:U};return se()({ourProps:E,theirProps:u,slot:H,defaultTag:Kn,name:"Combobox.Option"})}let qn=re(Bn),Gn=re(Vn),Jn=re(Hn),Xn=vt,Qn=re(Un),Zn=re(Yn),no=Object.assign(qn,{Input:Jn,Button:Gn,Label:Xn,Options:Qn,Option:Zn});export{Jn as G,no as H,Qn as K,Zn as j};
