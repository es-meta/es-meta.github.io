import{X as k,r as l,u as b,a3 as w,j as e,c as N,af as C,i as S,ag as B,ah as T,ai as f,aj as j,ak as M,al as I,am as F,an as v}from"./index-u4wQXj53.js";import{H as O,k as z,U as H,a as V,f as E}from"./combobox-DiBfn7XN.js";import{AlgoViewerHeaderUsingAlgoName as y}from"./AlgoViewerHeader-Dgaa352X.js";import{B as R}from"./bp.types-5Bw1Nza2.js";import{S as $}from"./switch-yOuoMdUV.js";import{t as P}from"./ordinal.utils-BB0KuaeA.js";import{S as U}from"./StateViewerItem-CuUZi7Ap.js";import{T as q,a as X,b as Q}from"./tooltip-DQxzrpit.js";import{v as W}from"./v4-BKrj-4V8.js";import"./use-resolve-button-type-BGug-Wxw.js";import"./use-transient-Dsm2JR7e.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=k("OctagonPause",[["path",{d:"M10 15V9",key:"1lckn7"}],["path",{d:"M14 15V9",key:"1muqhk"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=k("Octagon",[["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=k("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function D(t,a){return a[t]?.nameForCallstack??t}function G(t,a){return E(t,a.replace(" ",""),.2,n=>n.search)}function K({values:t,value:a,onChange:n,placeholder:o}){const[i,r]=l.useState(""),m=b(w),c=l.useMemo(()=>t.map(s=>({name:s,search:D(s,m),view:e.jsx(y,{name:s})})),[t,m]),d=l.useMemo(()=>G(c,i),[i,t]),h=l.useMemo(()=>c.find(s=>s.name===a),[a,c]);return e.jsxs(O,{immediate:!0,as:"div",className:"relative size-full",virtual:{options:d},value:h,onChange:s=>n(s?.name??null),children:[e.jsx(z,{placeholder:o,onChange:s=>r(s.target.value)}),e.jsx(H,{transition:!0,anchor:"bottom",className:"bg-white dark:bg-neutral-800 font-mono text-sm z-101 shadow-lg w-(--input-width) origin-top transition duration-200 ease-out empty:invisible data-closed:scale-95 data-closed:opacity-0 h-96 overflow-scroll rounded-lg",children:({option:s})=>e.jsx(V,{value:s,as:l.Fragment,children:({focus:p})=>e.jsx("div",{className:N("even:bg-white odd:bg-neutral-50","dark:even:bg-neutral-800 dark:odd:bg-neutral-900","p-2 cursor-pointer w-full break-all",p&&"even:bg-blue-200 odd:bg-blue-200 dark:even:bg-blue-950 dark:odd:bg-blue-950"),title:s.name,children:s.view})},s.name)})]})}function Y(t){const{idx:a,onToggleClick:n,onRemoveClick:o,data:i}=t,r=l.useMemo(()=>a%2===0,[a]),{viewName:m,enabled:c}=i,d=l.useCallback(()=>{n(a)},[n,a]),h=l.useCallback(()=>{o(a)},[o,a]);return e.jsx(e.Fragment,{children:e.jsxs("tr",{className:N(" hover:bg-neutral-500/25 transition-all",r?"bg-white dark:bg-neutral-900":"bg-neutral-100 dark:bg-neutral-800"),children:[e.jsx("td",{className:"lowercase border-r overflow-hidden text-wrap text-center",children:P(i.steps)}),e.jsx("td",{className:"border-r overflow-hidden break-before-all text-wrap pb-1",children:e.jsx(y,{name:m})}),e.jsx("td",{className:"border-r text-center",children:e.jsx($,{checked:c,onChange:()=>d()})}),e.jsx("td",{className:"",children:e.jsx("button",{className:"h-full size-full items-center flex justify-center hover:text-red-600 active:scale-90 transition-all",onClick:()=>h(),children:e.jsx(_,{})})})]})})}function Z(t,a,n,o,i){const r=a!==null?o[a]?.name:null,m=Object.values(o).map(p=>p.name);if(a===null||r===null)return r;const c=[1],d=`${c} @ ${r}`,h=n.some(({duplicateCheckId:p})=>p===d);return m.includes(r)&&!h?i({type:R.Spec,duplicateCheckId:d,algoName:o[a].info?.name??(console.error("require spec info"),""),viewName:r,steps:c,enabled:!0}):h?v.warning(`Breakpoint already set: ${d}`):v.warning(`Wrong algorithm name: ${r}`),r}function ue(){const t=b(w),a=l.useMemo(()=>new Set(Object.values(t).map(u=>u.info?.name??"")).values().toArray().filter(u=>u!==""),[t]),n=b(C),[o,i]=S(B),r=b(T),m=r===f.INIT||r===f.JS_INPUT,[c,d]=l.useState(null),h=j(M),s=j(I),p=l.useCallback(u=>{const g=Object.values(t).find(x=>x.name===u)?.fid??null;d(Z(!0,g,n,t,s))},[n,t]),A=l.useCallback(()=>{i(u=>!u)},[i]);return e.jsxs(U,{header:"Breakpoints",headerItems:e.jsxs(q,{children:[e.jsx(X,{asChild:!0,children:e.jsx(F,{position:"single",disabled:m,onClick:A,className:o?"h-6 bg-blue-600 hover:bg-blue-500 dark:bg-blue-600 hover:dark:bg-blue-500 text-white hover:text-white":"h-6",icon:o?e.jsx(L,{}):e.jsx(J,{}),label:o?e.jsx("span",{children:"skipping breakpoints"}):e.jsx("span",{children:"using breakpoints"})})}),e.jsx(Q,{children:e.jsx("p",{children:"If this is toggled on, skip breakpoints when doing steps"})})]}),children:[e.jsx("div",{className:"flex flex-row items-center w-full text-xs",children:e.jsx(K,{value:c,values:a,onChange:p,placeholder:"search by name"})}),e.jsxs("table",{className:"w-full text-xs border-t",children:[e.jsx("thead",{className:"font-200 text-neutral-500 dark:text-neutral-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-r",children:"Step"}),e.jsx("th",{className:"border-r w-auto",children:"Name"}),e.jsx("th",{className:"border-r w-4",children:"Enable"}),e.jsx("th",{className:"w-1",children:"Remove"})]})}),e.jsx("tbody",{children:n.length>0?n.map((u,g)=>e.jsx(Y,{data:u,idx:g,onRemoveClick:x=>h(x),onToggleClick:()=>null},W())):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-neutral-500 dark:text-neutral-400 p-4 text-sm",children:"No breakpoints. Add Breakpoint by clicking on steps in spec viewer or by searching name"})})})]})]})}export{Z as addBreakHandler,ue as default};
