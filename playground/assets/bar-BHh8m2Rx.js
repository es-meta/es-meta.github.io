import{a1 as d,a2 as b,r,g as p,j as l,n as k,N as v,a3 as x,O as w,a4 as j,a5 as C,a6 as E,a7 as h}from"./index-C6px-0LU.js";import{H as N,G as S,K as T,j as A}from"./combobox-CN46ChJ0.js";import"./use-resolve-button-type-BccZYqBG.js";function f(e){return{type:"atom",atom:e}}function B(e,n,o){const i=n.substring(1),s=i.substring(0,i.length-1),u=i[i.length-1],c=Number(s);return!Number.isNaN(c)&&c>0?[{label:"Send Input: "+u+" "+s+" times",searchTarget:"",target:{type:"func",func:()=>{for(let a=0;a<c;a++)document.dispatchEvent(new KeyboardEvent("keydown",{key:u,bubbles:!0,cancelable:!0}))}}}]:[{label:"Send Input: "+i,searchTarget:"",target:{type:"func",func:()=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:i,bubbles:!0,cancelable:!0}))}}}]}f(d(null,(e,n)=>void n(b,"bp"))),f(d(null,(e,n)=>void n(b,"callstack"))),f(d(null,(e,n)=>void n(b,"heap"))),f(d(null,(e,n)=>void n(b,"env"))),f(d(null,(e,n)=>void n(b,"stats")));function K(e){const{value:n,setValue:o,ref:i}=e,[s,u]=r.useState(":");p(x);const c=p(w),a=r.useMemo(()=>B(c,s),[s,c]);return r.useEffect(()=>{s===""&&e.close()},[s,e.close]),l.jsxs(N,{immediate:!0,virtual:{options:a},value:n||void 0,onChange:t=>o(t||null),children:[l.jsx(S,{ref:i,autoFocus:!0,className:"text-sm w-full rounded-lg p-8 focus:outline-hidden bg-white dark:bg-neutral-900",value:s,onChange:t=>u(t.target.value),onKeyDown:t=>{t.key==="Backspace"&&t.currentTarget.value===""&&e.close()}}),l.jsx(T,{transition:!0,anchor:"top start",className:"text-sm z-101 w-(--input-width) origin-bottom shadow-lg transition duration-75 ease-out empty:invisible data-closed:scale-95 data-closed:opacity-0 h-48 overflow-scroll rounded-lg bg-white/25 dark:bg-neutral-900/25 backdrop-blur-md",children:({option:t})=>l.jsx(A,{value:t,as:r.Fragment,children:({focus:y})=>l.jsxs("div",{className:k("even:bg-white odd:bg-neutral-50","dark:even:bg-neutral-900 dark:odd:bg-neutral-800",y?"even:bg-blue-300 odd:bg-blue-300 dark:even:bg-blue-900 dark:odd:bg-blue-900":"","p-2 cursor-pointer w-full"),title:JSON.stringify(t),children:[l.jsx(v,{className:"hidden ui-selected:block"}),t.label]})},JSON.stringify(t))})]})}function V(e){return e.key===":"}function D(){const e=j(),[n,o]=r.useState(!1),i=r.useRef(null),s=a=>{a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement||(V(a)?(a.preventDefault(),o(!0),i.current?.focus()):a.key==="Escape"&&o(!1))};r.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[]);const u=r.useCallback(a=>{if(a===null)return;const{target:t}=a;t&&(t.type==="func"?t.func():t.type==="atom"&&e.set(t.atom)),o(!1),C.info("command bar called "+a.label)},[e]),c=r.useCallback(()=>{o(!1)},[]);return l.jsx(E,{initial:!1,children:n&&l.jsx(h.div,{className:"flex-col fixed top-0 touch-none left-0 w-full h-full bg-gradient-to-b from-black/0 to-black/25 flex items-center justify-start z-50",onClick:()=>o(!1),initial:m.initial,animate:m.animate,exit:m.exit,transition:{duration:.125},children:l.jsx(h.div,{className:"absolute left-4 right-4 bottom-4",onClick:a=>a.stopPropagation(),initial:g.initial,animate:g.animate,exit:g.exit,transition:{duration:.125},children:l.jsx(K,{ref:i,value:null,setValue:u,close:c})})})})}const g={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},m={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};export{D as default};
